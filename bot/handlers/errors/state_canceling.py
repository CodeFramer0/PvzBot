import api
from aiogram import types
from aiogram.dispatcher import FSMContext
from loader import dp
from states import *


@dp.message_handler(
    state=[
        order.OrderStates.waiting_for_marketplace,
        order.OrderStates.waiting_for_pickup_point,
    ]
)
async def real_cancellation(message: types.Message, state: FSMContext, user):
    if message.text == "/cancel":
        await state.finish()
        await message.answer(
            f"–°–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–º–µ–Ω–µ–Ω–æ, –∂–¥—É –í–∞—à —à—Ç—Ä–∏—Ö/QR-–∫–æ–¥ ü§ñ.\n"
            "–Ø –±–æ—Ç –¥–ª—è –∑–∞–∫–∞–∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑ –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏.\n\n"
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–∏—à–ª–∏—Ç–µ —Ñ–æ—Ç–æ –í–∞—à–µ–≥–æ —à—Ç—Ä–∏—Ö/QR-–∫–æ–¥–∞, —á—Ç–æ–±—ã —è –º–æ–≥ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤. üì¶\n\n"
            "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ @CodeFramer (<strong>–ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –≤–æ–ø—Ä–æ—Å–∞–º</strong>).\n\n"
            'P.S. –ï—Å–ª–∏ –í—ã —Å—á–∏—Ç–∞–µ—Ç–µ, —á—Ç–æ –±–æ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –í—ã –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞. –í–∞–º –Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "–û—Ç–º–µ–Ω–∏—Ç—å ‚ùå" –∏–ª–∏ –≤–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É "/cancel".'
        )
    else:
        await message.answer(
            '–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞. –ë–æ—Ç –æ–∂–∏–¥–∞–µ—Ç –æ—Ç –í–∞—Å –≤—ã–±–æ—Ä–∞ –æ–¥–Ω–æ–π –∏–∑ –∫–Ω–æ–ø–æ–∫ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ (—Å–æ–æ–±—â–µ–Ω–∏–µ –≤—ã—à–µ). –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∏–∑ —ç—Ç–∏—Ö –∫–Ω–æ–ø–æ–∫. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞, –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–û—Ç–º–µ–Ω–∏—Ç—å" –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É "/cancel".'
        )


@dp.message_handler(commands=["cancel"], state=order.OrderStates)
async def fake_cancellation(message: types.Message, user):
    await message.answer(
        f"–°–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–º–µ–Ω–µ–Ω–æ, –∂–¥—É –í–∞—à —à—Ç—Ä–∏—Ö/QR-–∫–æ–¥ ü§ñ.\n"
        "–Ø –±–æ—Ç –¥–ª—è –∑–∞–∫–∞–∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑ –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏.\n\n"
        "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–∏—à–ª–∏—Ç–µ —Ñ–æ—Ç–æ –í–∞—à–µ–≥–æ —à—Ç—Ä–∏—Ö/QR-–∫–æ–¥–∞, —á—Ç–æ–±—ã —è –º–æ–≥ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤. üì¶\n\n"
        "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ @CodeFramer (<strong>–ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –≤–æ–ø—Ä–æ—Å–∞–º</strong>).\n\n"
        'P.S. –ï—Å–ª–∏ –í—ã —Å—á–∏—Ç–∞–µ—Ç–µ, —á—Ç–æ –±–æ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –í—ã –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞. –í–∞–º –Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "–û—Ç–º–µ–Ω–∏—Ç—å ‚ùå" –∏–ª–∏ –≤–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É "/cancel".'
    )
